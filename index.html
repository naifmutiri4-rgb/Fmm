<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>FMM Royal Hub | Ultimate Enterprise Edition V10.0</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        /* [1] نظام المتغيرات الملكي - الأساس الثابت */
        :root {
            --royal-purple: #7c4dff;
            --royal-dark: #5e35b1;
            --deep-black: #050508;
            --panel-bg: #0d0d12;
            --sidebar-w: 260px;
            --sidebar-c: 85px;
            --border: rgba(255, 255, 255, 0.08);
            --success: #00e676;
            --error: #ff5252;
            --warning: #ffd600;
            --text-main: #ffffff;
            --text-muted: #8e8e93;
            --glass: rgba(255, 255, 255, 0.03);
            --card-radius: 24px;
            --transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
        }

        /* [2] إعدادات الصفحة العامة */
        * { box-sizing: border-box; transition: var(--transition); scroll-behavior: smooth; }
        body { 
            background: var(--deep-black); 
            color: var(--text-main); 
            font-family: 'Segoe UI', system-ui, -apple-system, sans-serif; 
            margin: 0; display: flex; height: 100vh; overflow: hidden; 
        }

        /* تحسين التمرير (Scrollbar) */
        ::-webkit-scrollbar { width: 5px; height: 5px; }
        ::-webkit-scrollbar-track { background: var(--deep-black); }
        ::-webkit-scrollbar-thumb { background: var(--royal-purple); border-radius: 10px; }

        /* [3] السايدبار - الهيكل الذي لا يتغير */
        .sidebar { 
            width: var(--sidebar-w); background: #000; border-left: 1px solid var(--border); 
            display: flex; flex-direction: column; z-index: 1000; flex-shrink: 0; position: relative;
        }
        .sidebar.collapsed { width: var(--sidebar-c); }
        
        .sidebar-header { padding: 30px 20px; display: flex; align-items: center; justify-content: space-between; border-bottom: 1px solid var(--border); }
        .logo-box { display: flex; align-items: center; gap: 12px; overflow: hidden; }
        .logo-icon { 
            min-width: 38px; height: 38px; background: linear-gradient(135deg, var(--royal-purple), var(--royal-dark)); 
            border-radius: 12px; display: flex; align-items: center; justify-content: center; 
            font-weight: bold; font-size: 20px; box-shadow: 0 0 20px rgba(124, 77, 255, 0.3);
        }
        .logo-text { font-size: 18px; font-weight: 900; letter-spacing: 1px; white-space: nowrap; }

        .nav-container { flex: 1; overflow-y: auto; padding: 15px 12px; }
        .nav-group-label { 
            font-size: 10px; color: var(--royal-purple); padding: 25px 15px 10px; 
            text-transform: uppercase; font-weight: 800; letter-spacing: 1.2px; opacity: 0.5;
        }
        
        .nav-item { 
            padding: 14px 16px; border-radius: 16px; display: flex; align-items: center; gap: 15px; 
            color: var(--text-muted); cursor: pointer; margin-bottom: 4px; font-size: 14px; 
            border: 1px solid transparent; position: relative;
        }
        .nav-item:hover { background: var(--glass); color: #fff; transform: translateX(-5px); }
        .nav-item.active { 
            background: linear-gradient(45deg, var(--royal-purple), var(--royal-dark)); 
            color: #fff; box-shadow: 0 10px 25px rgba(124, 77, 255, 0.25); 
        }
        .nav-item i { font-size: 18px; width: 22px; text-align: center; }
        .badge { 
            background: var(--error); color: white; font-size: 10px; padding: 2px 8px; 
            border-radius: 50px; margin-right: auto; font-weight: bold;
        }

        /* [4] منطقة المحتوى الرئيسية */
        .main-content { flex: 1; display: flex; flex-direction: column; overflow: hidden; position: relative; }
        
        /* التوب بار الفخم */
        .top-bar { 
            padding: 15px 40px; background: rgba(13, 13, 18, 0.8); backdrop-filter: blur(15px); 
            border-bottom: 1px solid var(--border); display: flex; justify-content: space-between; align-items: center; z-index: 900;
        }
        
        .search-global {
            position: relative; width: 350px;
        }
        .search-global input {
            width: 100%; background: var(--glass); border: 1px solid var(--border);
            padding: 10px 40px 10px 15px; border-radius: 12px; color: #fff; outline: none;
        }
        .search-global i { position: absolute; right: 15px; top: 12px; color: var(--text-muted); }

        .user-profile { display: flex; align-items: center; gap: 15px; cursor: pointer; }
        .user-info { text-align: right; }
        .user-name { font-weight: bold; font-size: 14px; display: block; }
        .user-status { font-size: 11px; color: var(--success); display: flex; align-items: center; gap: 5px; }
        .user-status::before { content: ''; width: 6px; height: 6px; background: var(--success); border-radius: 50%; }

        /* [5] الأقسام التفاعلية */
        .page-section { display: none; width: 100%; height: 100%; padding: 30px 40px; overflow-y: auto; }
        .page-section.active { display: block; animation: sectionFade 0.5s ease-out; }
        
        @keyframes sectionFade {
            from { opacity: 0; transform: translateY(15px); }
            to { opacity: 1; transform: translateY(0); }
        }

        /* [6] نظام الكروت والإحصائيات */
        .stat-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(280px, 1fr)); gap: 25px; margin-bottom: 35px; }
        .stat-card { 
            background: var(--panel-bg); border: 1px solid var(--border); border-radius: var(--card-radius); 
            padding: 25px; position: relative; overflow: hidden;
        }
        .stat-card::after {
            content: ''; position: absolute; top: 0; right: 0; width: 100px; height: 100px;
            background: linear-gradient(225deg, rgba(124, 77, 255, 0.05) 0%, transparent 70%);
        }
        .stat-header { display: flex; justify-content: space-between; align-items: flex-start; margin-bottom: 20px; }
        .stat-icon-box { 
            width: 54px; height: 54px; border-radius: 18px; display: flex; align-items: center; 
            justify-content: center; font-size: 22px; 
        }
        .trend-label { font-size: 12px; font-weight: bold; padding: 4px 8px; border-radius: 8px; }
        .trend-up { background: rgba(0, 230, 118, 0.1); color: var(--success); }
        
        /* [7] الجداول الذكية */
        .content-card { 
            background: var(--panel-bg); border: 1px solid var(--border); border-radius: var(--card-radius); padding: 25px; 
            margin-bottom: 30px;
        }
        .card-header { display: flex; justify-content: space-between; align-items: center; margin-bottom: 25px; }
        
        table { width: 100%; border-collapse: collapse; }
        th { text-align: right; padding: 15px 20px; color: var(--text-muted); font-size: 12px; font-weight: 600; border-bottom: 1px solid var(--border); text-transform: uppercase; letter-spacing: 1px; }
        td { padding: 18px 20px; border-bottom: 1px solid rgba(255,255,255,0.03); font-size: 14px; vertical-align: middle; }
        tr:hover td { background: rgba(255,255,255,0.01); }

        .status-badge { 
            padding: 6px 14px; border-radius: 10px; font-size: 11px; font-weight: 800; 
            display: inline-flex; align-items: center; gap: 6px;
        }
        .bg-success { background: rgba(0, 230, 118, 0.1); color: var(--success); }
        .bg-warning { background: rgba(255, 214, 0, 0.1); color: var(--warning); }
        .bg-error { background: rgba(255, 82, 82, 0.1); color: var(--error); }

        /* [8] نظام الإشعارات (Toasts) */
        .toast-wrapper { position: fixed; top: 30px; left: 30px; z-index: 10000; }
        .toast-msg { 
            background: #161622; color: #fff; padding: 16px 24px; border-radius: 16px; 
            margin-bottom: 12px; border-right: 5px solid var(--royal-purple); 
            box-shadow: 0 20px 40px rgba(0,0,0,0.6); display: flex; align-items: center; gap: 15px;
            animation: toastIn 0.4s cubic-bezier(0.175, 0.885, 0.32, 1.275) forwards;
        }
        @keyframes toastIn { from { opacity: 0; transform: translateX(-100px); } to { opacity: 1; transform: translateX(0); } }

        /* [9] أزرار النظام */
        .btn-royal { 
            background: linear-gradient(45deg, var(--royal-purple), var(--royal-dark)); 
            color: #fff; border: none; padding: 12px 24px; border-radius: 14px; 
            font-weight: 600; cursor: pointer; display: flex; align-items: center; gap: 10px;
        }
        .btn-royal:hover { transform: translateY(-3px); box-shadow: 0 8px 20px rgba(124, 77, 255, 0.4); }

    </style>
</head>
<body>

    <div class="toast-wrapper" id="toastBox"></div>

    <aside class="sidebar" id="sidebar">
        <div class="sidebar-header">
            <div class="logo-box">
                <div class="logo-icon">F</div>
                <span class="logo-text">ROYAL HUB</span>
            </div>
            <i class="fas fa-indent" id="sidebarToggle" style="cursor:pointer; color:var(--text-muted)" onclick="toggleSidebar()"></i>
        </div>
        
        <div class="nav-container">
            <div class="nav-group-label">اللوحة الرئيسية</div>
            <div class="nav-item active" onclick="navigate('home', this)"><i class="fas fa-th-large"></i> <span class="nav-text">نظرة عامة</span></div>
            <div class="nav-item" onclick="navigate('orders', this)"><i class="fas fa-shopping-cart"></i> <span class="nav-text">إدارة الطلبات</span> <span class="badge" id="orderBadge">14</span></div>
            
            <div class="nav-group-label">الأدوات الاحترافية</div>
            <div class="nav-item" onclick="navigate('designer', this)"><i class="fas fa-fill-drip"></i> <span class="nav-text">مصمم الهوية</span></div>
            <div class="nav-item" onclick="navigate('finance', this)"><i class="fas fa-wallet"></i> <span class="nav-text">المالية</span></div>
            
            <div class="nav-group-label">الإدارة والدعم</div>
            <div class="nav-item" onclick="navigate('users', this)"><i class="fas fa-users-cog"></i> <span class="nav-text">المستخدمين</span></div>
            <div class="nav-item" onclick="navigate('tickets', this)"><i class="fas fa-headset"></i> <span class="nav-text">التذاكر</span> <span class="badge" style="background:var(--warning); color:#000;">2</span></div>
            <div class="nav-item" onclick="navigate('settings', this)"><i class="fas fa-sliders-h"></i> <span class="nav-text">الإعدادات</span></div>
        </div>

        <div style="padding: 20px; border-top: 1px solid var(--border);">
            <div class="nav-item" style="color:var(--error)" onclick="logout()"><i class="fas fa-power-off"></i> <span class="nav-text">تسجيل الخروج</span></div>
        </div>
    </aside>

    <main class="main-content">
        <header class="top-bar">
            <div class="search-global">
                <i class="fas fa-search"></i>
                <input type="text" id="globalSearch" placeholder="ابحث عن طلب، عميل، أو كود..." onkeyup="masterSearch()">
            </div>
            
            <div style="display:flex; align-items:center; gap:30px;">
                <div id="clock" style="font-family: monospace; color: var(--royal-purple); font-weight: bold; font-size: 18px; letter-spacing: 1px;">00:00:00</div>
                <div class="user-profile">
                    <div class="user-info">
                        <span class="user-name">عبدالرحمن محمد</span>
                        <span class="user-status">مسؤول النظام</span>
                    </div>
                    <img src="https://ui-avatars.com/api/?name=FMM&background=7c4dff&color=fff&bold=true" style="width:42px; border-radius:14px; border:2px solid var(--border);">
                </div>
            </div>
        </header>

        <section id="page-home" class="page-section active">
            <div class="stat-grid">
                <div class="stat-card">
                    <div class="stat-header">
                        <div class="stat-icon-box" style="background:rgba(124, 77, 255, 0.1); color:var(--royal-purple)"><i class="fas fa-briefcase"></i></div>
                        <span class="trend-label trend-up">+14%</span>
                    </div>
                    <span style="color:var(--text-muted); font-size:13px;">إجمالي المبيعات</span>
                    <h2 style="margin:10px 0; font-size:28px;">124,500.00 ر.س</h2>
                </div>
                <div class="stat-card">
                    <div class="stat-header">
                        <div class="stat-icon-box" style="background:rgba(255, 214, 0, 0.1); color:var(--warning)"><i class="fas fa-sync-alt fa-spin"></i></div>
                        <span class="trend-label" style="background:rgba(255,255,255,0.05)">نشط الآن</span>
                    </div>
                    <span style="color:var(--text-muted); font-size:13px;">طلبات قيد المعالجة</span>
                    <h2 id="live-orders-count" style="margin:10px 0; font-size:28px;">24 طلب</h2>
                </div>
                <div class="stat-card">
                    <div class="stat-header">
                        <div class="stat-icon-box" style="background:rgba(0, 230, 118, 0.1); color:var(--success)"><i class="fas fa-user-check"></i></div>
                        <span class="trend-label trend-up">ممتاز</span>
                    </div>
                    <span style="color:var(--text-muted); font-size:13px;">تقييم الخدمة</span>
                    <h2 style="margin:10px 0; font-size:28px;">4.9 / 5.0</h2>
                </div>
            </div>

            <div class="content-card">
                <div class="card-header">
                    <h4 style="margin:0;"><i class="fas fa-list-ul" style="margin-left:10px; color:var(--royal-purple)"></i> أحدث العمليات المالية</h4>
                    <button class="btn-royal" onclick="refreshTable()"><i class="fas fa-redo-alt"></i> تحديث البيانات</button>
                </div>
                <table id="mainOrdersTable">
                    <thead>
                        <tr>
                            <th>رقم العملية</th>
                            <th>العميل</th>
                            <th>الخدمة المطلوبة</th>
                            <th>المبلغ</th>
                            <th>الحالة</th>
                            <th>الإجراء</th>
                        </tr>
                    </thead>
                    <tbody id="ordersBody">
                        </tbody>
                </table>
            </div>
        </section>

        <section id="page-designer" class="page-section">
            <div style="display:flex; justify-content:space-between; align-items:center; margin-bottom:30px;">
                <h2>مصمم واجهة الهبوط <small style="font-size:12px; color:var(--text-muted)">V2.0</small></h2>
                <div style="display:flex; gap:12px;">
                    <button class="btn-royal" style="background:var(--glass)" onclick="clearCanvas()">إعادة تعيين</button>
                    <button class="btn-royal" onclick="saveDesign()">اعتماد التصميم</button>
                </div>
            </div>
            
            <div style="display:grid; grid-template-columns: 320px 1fr; gap:30px;">
                <div class="content-card" style="margin:0;">
                    <h5 style="margin-top:0;">المكتبة البرمجية</h5>
                    <div class="nav-item" draggable="true" ondragstart="onDragItem(event, 'Header')" style="border: 1px dashed var(--border)">
                        <i class="fas fa-heading"></i> عنوان ملكي
                    </div>
                    <div class="nav-item" draggable="true" ondragstart="onDragItem(event, 'Video')" style="border: 1px dashed var(--border)">
                        <i class="fas fa-play-circle"></i> مشغل فيديو
                    </div>
                    <div class="nav-item" draggable="true" ondragstart="onDragItem(event, 'PriceCard')" style="border: 1px dashed var(--border)">
                        <i class="fas fa-credit-card"></i> بطاقة تسعير
                    </div>
                    <div class="nav-item" draggable="true" ondragstart="onDragItem(event, 'Review')" style="border: 1px dashed var(--border)">
                        <i class="fas fa-star"></i> قسم الآراء
                    </div>
                </div>
                
                <div id="dropZone" ondragover="allowDrop(event)" ondrop="onDropItem(event)" style="min-height:500px; border:2px dashed var(--border); border-radius:24px; background:rgba(0,0,0,0.2); display:flex; flex-direction:column; align-items:center; justify-content:center; gap:20px;">
                    <i class="fas fa-cloud-upload-alt fa-3x" style="opacity:0.1"></i>
                    <p style="color:var(--text-muted)">قم بسحب العناصر هنا لبناء صفحتك</p>
                </div>
            </div>
        </section>

    </main>

    <script>
        /**
         * 1. إدارة البيانات الأساسية (Database Simulation)
         */
        let ordersData = [
            { id: "OR-7712", name: "خالد العتيبي", service: "توثيق حساب تجاري", price: "4,500", status: "success", time: "قبل 10 دقائق" },
            { id: "OR-7715", name: "مؤسسة الرؤية", service: "حملة إعلانية سناب", price: "12,000", status: "warning", time: "قبل ساعة" },
            { id: "OR-7718", name: "سارة المنصور", service: "زيادة متابعين حقيقي", price: "850", status: "success", time: "قبل ساعتين" },
            { id: "OR-7720", name: "فهد الأحمد", service: "برمجة بوت تلغرام", price: "3,200", status: "error", time: "أمس" },
            { id: "OR-7722", name: "متجر الأناقة", service: "إدارة حساب تيك توك", price: "2,500", status: "warning", time: "أمس" }
        ];

        /**
         * 2. محرك تشغيل الساعة والنظام
         */
        function initSystem() {
            // تحديث الساعة
            setInterval(() => {
                const now = new Date();
                document.getElementById('clock').innerText = now.toLocaleTimeString('ar-SA', { hour12: false });
            }, 1000);

            // تحميل البيانات الأولية
            renderOrders(ordersData);
            pushToast("مرحباً بك.. تم تحميل النظام بالكامل", "success");
        }

        /**
         * 3. إدارة التنقل بين الصفحات
         */
        function navigate(pageId, element) {
            // إخفاء جميع الأقسام
            document.querySelectorAll('.page-section').forEach(section => {
                section.classList.remove('active');
            });

            // إظهار القسم المطلوب
            const target = document.getElementById('page-' + pageId);
            if(target) target.classList.add('active');

            // تحديث حالة القائمة الجانبية
            document.querySelectorAll('.nav-item').forEach(item => {
                item.classList.remove('active');
            });
            element.classList.add('active');

            pushToast(`تم الانتقال إلى: ${element.querySelector('.nav-text').innerText}`);
        }

        /**
         * 4. محرك عرض الجداول (Dynamic Rendering)
         */
        function renderOrders(data) {
            const tbody = document.getElementById('ordersBody');
            if(!tbody) return;

            tbody.innerHTML = '';
            data.forEach(order => {
                const statusText = order.status === 'success' ? 'مكتمل' : (order.status === 'warning' ? 'معلق' : 'ملغي');
                const statusClass = order.status === 'success' ? 'bg-success' : (order.status === 'warning' ? 'bg-warning' : 'bg-error');

                const row = `
                    <tr>
                        <td><b style="color:var(--royal-purple)">#${order.id}</b></td>
                        <td>
                            <div style="display:flex; align-items:center; gap:10px;">
                                <img src="https://ui-avatars.com/api/?name=${order.name}&background=random&color=fff" style="width:30px; border-radius:8px;">
                                ${order.name}
                            </div>
                        </td>
                        <td>${order.service}</td>
                        <td>${order.price} ر.س</td>
                        <td><span class="status-badge ${statusClass}">${statusText}</span></td>
                        <td>
                            <button onclick="pushToast('جاري استعراض التفاصيل...')" style="background:none; border:none; color:var(--text-muted); cursor:pointer;"><i class="fas fa-ellipsis-v"></i></button>
                        </td>
                    </tr>
                `;
                tbody.innerHTML += row;
            });
        }

        /**
         * 5. نظام البحث الرئيسي (Master Search)
         */
        function masterSearch() {
            const query = document.getElementById('globalSearch').value.toLowerCase();
            const filtered = ordersData.filter(item => 
                item.name.toLowerCase().includes(query) || 
                item.id.toLowerCase().includes(query) ||
                item.service.toLowerCase().includes(query)
            );
            renderOrders(filtered);
        }

        /**
         * 6. نظام الإشعارات (Toast Logic)
         */
        function pushToast(message, type = 'info') {
            const box = document.getElementById('toastBox');
            const toast = document.createElement('div');
            toast.className = 'toast-msg';
            
            let icon = 'fa-info-circle';
            if(type === 'success') icon = 'fa-check-circle';
            if(type === 'error') icon = 'fa-exclamation-triangle';

            toast.innerHTML = `
                <i class="fas ${icon}" style="color:var(--royal-purple); font-size:20px;"></i>
                <span>${message}</span>
            `;

            box.appendChild(toast);

            // إزالة الإشعار بعد 4 ثوانٍ
            setTimeout(() => {
                toast.style.opacity = '0';
                toast.style.transform = 'translateX(-50px)';
                setTimeout(() => toast.remove(), 500);
            }, 4000);
        }

        /**
         * 7. وظائف المصمم (Drag & Drop Logic)
         */
        function allowDrop(ev) { ev.preventDefault(); }

        function onDragItem(ev, type) {
            ev.dataTransfer.setData("compType", type);
        }

        function onDropItem(ev) {
            ev.preventDefault();
            const type = ev.dataTransfer.getData("compType");
            const zone = document.getElementById('dropZone');
            
            // تنظيف رسالة الترحيب عند أول إضافة
            if(zone.querySelector('p')) zone.innerHTML = '';

            const element = document.createElement('div');
            element.className = 'nav-item';
            element.style.width = '90%';
            element.style.cursor = 'default';
            element.style.background = 'rgba(124, 77, 255, 0.05)';
            element.innerHTML = `
                <i class="fas fa-cube"></i>
                <div style="flex:1">
                    <b>مكون ${type}</b><br>
                    <small style="font-size:10px">ID: ${Math.floor(Math.random()*1000)}</small>
                </div>
                <i class="fas fa-trash" style="color:var(--error); cursor:pointer;" onclick="this.parentElement.remove()"></i>
            `;
            zone.appendChild(element);
            pushToast("تمت إضافة العنصر بنجاح");
        }

        function clearCanvas() {
            if(confirm("هل أنت متأكد من مسح لوحة التصميم؟")) {
                document.getElementById('dropZone').innerHTML = `
                    <i class="fas fa-cloud-upload-alt fa-3x" style="opacity:0.1"></i>
                    <p style="color:var(--text-muted)">قم بسحب العناصر هنا لبناء واجهتك الملكية</p>
                `;
                pushToast("تم مسح اللوحة");
            }
        }

        function saveDesign() {
            pushToast("جاري معالجة الكود وحفظ القالب...", "success");
            setTimeout(() => pushToast("تم حفظ التصميم في قاعدة البيانات"), 2000);
        }

        /**
         * 8. وظائف إضافية (Sidebar & Utils)
         */
        function toggleSidebar() {
            const sidebar = document.getElementById('sidebar');
            const icon = document.getElementById('sidebarToggle');
            sidebar.classList.toggle('collapsed');
            
            if(sidebar.classList.contains('collapsed')) {
                icon.className = 'fas fa-outdent';
            } else {
                icon.className = 'fas fa-indent';
            }
        }

        function refreshTable() {
            pushToast("جاري جلب أحدث العمليات...");
            renderOrders(ordersData);
        }

        function logout() {
            if(confirm("سيتم إنهاء الجلسة الحالية، هل أنت متأكد؟")) {
                location.reload();
            }
        }

        // تشغيل النظام
        initSystem();

    </script>
</body>
</html>

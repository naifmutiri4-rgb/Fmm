<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0, viewport-fit=cover">
<title>FMM Dashboard</title>
<style>
:root {
    --fmm-purple: #8b5cf6;
    --fmm-gold: #fbbf24;
    --fmm-glow: rgba(139, 92, 246, 0.4);
    --bg-deep: #050505;
    --surface: #121214;
    --safe-top: env(safe-area-inset-top);
}
body {
    background-color: var(--bg-deep);
    color: #ffffff;
    font-family: -apple-system, BlinkMacSystemFont, "SF Pro Display", "Segoe UI", sans-serif;
    margin: 0; padding-top: var(--safe-top);
}
.fmm-header {
    padding: 25px 20px; text-align:center; position:relative;
}
.fmm-header h1 { font-size:22px; margin:0; font-weight:900; letter-spacing:-0.5px; color:#fff; text-shadow:0 0 20px var(--fmm-glow);}
.fmm-stats-grid {
    display:grid; grid-template-columns:1fr 1fr; gap:15px; padding:0 20px 25px;
}
.stat-card {
    background: var(--surface); padding:20px; border-radius:28px;
    border:1px solid rgba(255,255,255,0.05); box-shadow:0 10px 30px rgba(0,0,0,0.5);
}
.stat-card small { color:#666; font-size:11px; display:block; margin-bottom:8px; }
.stat-card div { font-size:18px; font-weight:700; color: var(--fmm-purple); }
.search-area { padding:0 20px 30px; }
.search-input {
    width:100%; background:#1a1a1c; border:1px solid #222; padding:16px 20px;
    border-radius:18px; color:#fff; font-size:15px; transition:0.3s;
}
.search-input:focus { border-color: var(--fmm-purple); box-shadow:0 0 15px var(--fmm-glow);}
.label-row { padding:0 25px 12px; display:flex; justify-content:space-between; font-size:12px; font-weight:600; color:#444; text-transform:uppercase;}
.fmm-order { margin:0 20px 12px; background: var(--surface); border-radius:24px; padding:20px; border-left:4px solid transparent; transition:0.3s;}
.fmm-order.pending { border-left-color: var(--fmm-purple); }
.fmm-order.active { border-left-color: var(--fmm-gold); }
.order-main { display:flex; justify-content:space-between; align-items:center; cursor:pointer;}
.order-title { font-weight:600; font-size:15px; }
.order-sub { font-size:11px; color:#555; margin-top:4px; }
.order-expand { max-height:0; overflow:hidden; transition:0.4s ease; }
.order-expand.show { max-height:300px; padding-top:20px; }
.link-chip { background: rgba(255,255,255,0.03); padding:8px 12px; border-radius:10px; font-size:11px; color:#aaa; margin-bottom:8px; display:inline-block; border:1px solid rgba(255,255,255,0.05);}
.btn-action { width:100%; padding:18px; background: var(--fmm-purple); border:none; border-radius:20px; color:#fff; font-weight:800; font-size:15px; margin-top:15px; box-shadow:0 10px 25px var(--fmm-glow); }
.fmm-sheet { position:fixed; inset:0; background:rgba(0,0,0,0.8); backdrop-filter:blur(20px); z-index:10000; display:none; align-items:flex-end;}
.fmm-sheet.active { display:flex; }
.sheet-content { background:#111; width:100%; border-radius:35px 35px 0 0; padding:35px 25px 50px; border-top:1px solid var(--fmm-purple); animation: slideUp 0.4s cubic-bezier(0.25,1,0.5,1);}
.chart-card { background: var(--surface); margin: 20px; border-radius: 25px; padding: 15px; }
@keyframes slideUp { from { transform:translateY(100%); } to { transform:translateY(0); } }
</style>
</head>
<body>

<header class="fmm-header">
<h1>FMM DASHBOARD</h1>
<div style="position:absolute; right:20px; top:28px; opacity:0.5;">ğŸ””</div>
</header>

<section class="fmm-stats-grid">
<div class="stat-card"><small>Ø§Ù„Ø±ØµÙŠØ¯ Ø§Ù„Ù…ØªØ§Ø­</small><div id="balance">$285.50</div></div>
<div class="stat-card"><small>Ø·Ù„Ø¨Ø§Øª Ø§Ù„ÙŠÙˆÙ…</small><div id="todayOrders">12 Ø·Ù„Ø¨</div></div>
</section>

<div class="search-area">
<input type="text" class="search-input" placeholder="Ø§Ø¨Ø­Ø« ÙÙŠ Ø·Ù„Ø¨Ø§Øª FMM..." onkeyup="filterOrders(this)">
</div>

<div class="label-row"><span>Ø¨Ø§Ù†ØªØ¸Ø§Ø± Ø§Ù„ØªÙ†ÙÙŠØ°</span><span id="pendingCount">2 Ø·Ù„Ø¨</span></div>
<div id="pendingList"></div>

<div class="label-row" style="margin-top:20px;"><span>Ù‚ÙŠØ¯ Ø§Ù„ØªÙ†ÙÙŠØ°</span></div>
<div id="activeList"></div>

<div class="chart-card">
<canvas id="financeChart"></canvas>
</div>

<div class="fmm-sheet" id="fmmSheet">
<div class="sheet-content">
<div style="display:flex; justify-content:space-between; align-items:center; margin-bottom:30px;">
<b style="font-size:20px;">Ø§Ù„ØªØ­Ù„ÙŠÙ„ Ø§Ù„Ø°ÙƒÙŠ</b>
<span onclick="closeSheet()" style="background:#222; padding:8px 15px; border-radius:12px; font-size:12px;">Ø¥Ù„ØºØ§Ø¡</span>
</div>
<div style="background:rgba(255,255,255,0.03); padding:20px; border-radius:20px; border:1px solid rgba(255,255,255,0.05); margin-bottom:25px;">
<div style="display:flex; justify-content:space-between; margin-bottom:10px;">
<span style="color:#888;">Ø§Ù„Ø®Ø¯Ù…Ø© Ø§Ù„Ù…ÙˆØµÙ‰ Ø¨Ù‡Ø§:</span>
<span style="color:#00e676;" id="sheetService">#20288</span>
</div>
<div style="font-size:24px; font-weight:800; margin:15px 0;"><span id="sheetTotal">$3.00</span> <small style="font-size:12px; color:#555; font-weight:400;">(Ø§Ù„ØªÙƒÙ„ÙØ© Ø§Ù„ÙƒÙ„ÙŠØ©)</small></div>
<div style="font-size:12px; color:#777; line-height:1.6;">ğŸ›¡ï¸ Ø¶Ù…Ø§Ù† 365 ÙŠÙˆÙ… | âš¡ ØªÙ†ÙÙŠØ° ÙÙˆØ±ÙŠ | âœ… ØªÙˆØµÙŠØ© Ù…Ø¤ÙƒØ¯Ø© Ù„Ù€ FMM</div>
</div>
<button class="btn-action" style="background:#00e676; color:#000; box-shadow:none;" onclick="confirmFMM()">Ø¥Ø±Ø³Ø§Ù„ Ø§Ù„Ø·Ù„Ø¨ Ø§Ù„Ø¢Ù† ğŸš€</button>
</div>
</div>

<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
<script>
// Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ø·Ù„Ø¨Ø§Øª
let orders = [
    {id:2088,name:"Ù…Ø­Ù…Ø¯ Ø§Ù„ØºØ§Ù…Ø¯ÙŠ",service:"Ù…ØªØ§Ø¨Ø¹ÙŠÙ† ØªÙŠÙƒ ØªÙˆÙƒ",qty:2500,price:1.20,links:["tiktok.com/@fmm_user","tiktok.com/video/1029384"],status:"pending"},
    {id:2085,name:"Ù…ØªØ¬Ø± Ø§Ù„Ø£Ù†Ø§Ù‚Ø©",service:"Ù„Ø§ÙŠÙƒØ§Øª Ø§Ù†Ø³ØªÙ‚Ø±Ø§Ù…",qty:5000,price:0.50,links:[],status:"active"}
];

let dailyRevenue = [1420, 980, 1200, 1600, 1100, 1350, 1500];
let dailyOrders = [12,8,10,14,9,11,13];
let financeChart;

function renderOrders() {
    const pending = document.getElementById('pendingList');
    const active = document.getElementById('activeList');
    pending.innerHTML = ""; active.innerHTML = "";
    let pendingCount = 0;
    orders.forEach(o => {
        let orderEl = document.createElement('div');
        orderEl.className = `fmm-order ${o.status}`;
        orderEl.innerHTML = `<div class="order-main" onclick="toggleOrder(this)">
            <div><div class="order-title">#${o.id} | ${o.name}</div>
            <div class="order-sub">${o.service} â€¢ ${o.qty.toLocaleString()} ÙˆØ­Ø¯Ø©</div></div>
            <div style="color:${o.status==='pending'? '--fmm-purple':'#fbbf24'}">â—</div>
        </div>
        <div class="order-expand">
            ${o.links.map(l=>`<div class="link-chip">${l}</div>`).join('')}
            ${o.status==='pending'? `<button class="btn-action" onclick="openSheet('${o.name}',${o.qty},${o.price},${o.id})">ØªØ­Ù„ÙŠÙ„ ÙˆØªØ­ÙˆÙŠÙ„ Ù„Ù„Ù…Ø²ÙˆØ¯</button>`:""}
        </div>`;
        if(o.status==='pending'){pending.appendChild(orderEl); pendingCount++;}
        else{active.appendChild(orderEl);}
    });
    document.getElementById('pendingCount').innerText = `${pendingCount} Ø·Ù„Ø¨`;
    updateFinanceChart();
}

function toggleOrder(el){ el.nextElementSibling.classList.toggle('show'); }

function openSheet(name, qty, price, id){
    document.getElementById('sheetService').innerText = `#${id}`;
    document.getElementById('sheetTotal').innerText = `$${(qty/1000*price).toFixed(2)}`;
    document.getElementById('fmmSheet').classList.add('active');
    window.currentOrderId = id;
}

function closeSheet(){ document.getElementById('fmmSheet').classList.remove('active'); }

function confirmFMM(){
    let order = orders.find(o=>o.id===window.currentOrderId);
    if(order){ order.status='active'; alert("ØªÙ… Ø¥Ø±Ø³Ø§Ù„ Ø§Ù„Ø·Ù„Ø¨ Ø¨Ù†Ø¬Ø§Ø­ âœ…"); }
    closeSheet(); renderOrders();
}

function filterOrders(input){
    const val = input.value.toLowerCase();
    document.querySelectorAll('.fmm-order').forEach(c=>{
        c.style.display = c.querySelector('.order-title').innerText.toLowerCase().includes(val)? "block":"none";
    });
}

// Ø§Ù„Ù…Ø®Ø·Ø· Ø§Ù„Ù…Ø§Ù„ÙŠ
function updateFinanceChart(){
    const ctx = document.getElementById('financeChart').getContext('2d');
    const labels = ['Ø§Ù„Ø£Ø­Ø¯','Ø§Ù„Ø¥Ø«Ù†ÙŠÙ†','Ø§Ù„Ø«Ù„Ø§Ø«Ø§Ø¡','Ø§Ù„Ø£Ø±Ø¨Ø¹Ø§Ø¡','Ø§Ù„Ø®Ù…ÙŠØ³','Ø§Ù„Ø¬Ù…Ø¹Ø©','Ø§Ù„Ø³Ø¨Øª'];
    if(financeChart) financeChart.destroy();
    financeChart = new Chart(ctx, {
        type:'line',
        data:{
            labels,
            datasets:[
                {label:'Ø§Ù„Ù…Ø¨ÙŠØ¹Ø§Øª Ø§Ù„ÙŠÙˆÙ…ÙŠØ© (Ø±.Ø³)', data: dailyRevenue, borderColor:'#8b5cf6', backgroundColor:'rgba(139,92,246,0.2)', fill:true, tension:0.3},
                {label:'Ø¹Ø¯Ø¯ Ø§Ù„Ø·Ù„Ø¨Ø§Øª', data: dailyOrders, borderColor:'#fbbf24', backgroundColor:'rgba(251,191,36,0.2)', fill:true, tension:0.3}
            ]
        },
        options:{
            responsive:true,
            plugins:{legend:{labels:{color:'#fff'}}},
            scales:{ y:{beginAtZero:true,ticks:{color:'#fff'}}, x:{ticks:{color:'#fff'}}}
        }
    });
}

window.onload = renderOrders;
</script>
</body>
</html>
